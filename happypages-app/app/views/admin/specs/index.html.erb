<div class="max-w-4xl mx-auto px-4 sm:px-6 py-8">
  <div class="flex items-center justify-between mb-6">
    <h1 class="text-2xl font-bold text-gray-900 tracking-tight">projects.</h1>
    <%= link_to new_admin_spec_path, class: "inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium text-white bg-[#ff584d] hover:bg-[#e64d43] transition-colors" do %>
      <svg class="size-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
      </svg>
      new project
    <% end %>
  </div>

  <% if @projects.any? %>
    <div class="space-y-3">
      <% @projects.each do |project| %>
        <% session = project.sessions.order(version: :desc).first %>
        <%= link_to admin_spec_path(project), class: "block" do %>
          <div class="bg-[#f4f4f0] rounded-xl border border-black/5 shadow-[inset_1px_1px_0_rgba(255,255,255,1),inset_-1px_-1px_0_rgba(0,0,0,0.05),0_4px_8px_rgba(0,0,0,0.05)] p-5 hover:shadow-[inset_1px_1px_0_rgba(255,255,255,1),inset_-1px_-1px_0_rgba(0,0,0,0.05),0_6px_12px_rgba(0,0,0,0.08)] transition-shadow">
            <div class="flex items-center justify-between">
              <div>
                <h2 class="text-base font-semibold text-gray-900"><%= project.name %></h2>
                <p class="text-sm text-gray-500 mt-1">
                  <% if session %>
                    v<%= session.version %> · <%= session.phase %> · <%= session.turns_used %>/<%= session.turn_budget %> turns
                  <% else %>
                    no sessions
                  <% end %>
                </p>
              </div>
              <div class="flex items-center gap-2">
                <% if session %>
                  <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium <%= session.status == 'active' ? 'bg-emerald-50 text-emerald-700' : 'bg-gray-100 text-gray-600' %>">
                    <%= session.status %>
                  </span>
                <% end %>
                <svg class="size-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8.25 4.5l7.5 7.5-7.5 7.5"/>
                </svg>
              </div>
            </div>
            <% if session && session.turns_used > 0 %>
              <div class="mt-3 h-1.5 bg-gray-200 rounded-full overflow-hidden">
                <div class="h-full bg-[#ff584d] rounded-full transition-all" style="width: <%= [(session.budget_percentage * 100).round, 100].min %>%"></div>
              </div>
            <% end %>
          </div>
        <% end %>
      <% end %>
    </div>
  <% else %>
    <div class="bg-[#f4f4f0] rounded-xl border border-black/5 shadow-[inset_1px_1px_0_rgba(255,255,255,1),inset_-1px_-1px_0_rgba(0,0,0,0.05),0_4px_8px_rgba(0,0,0,0.05)] p-10 text-center">
      <div class="inline-flex items-center justify-center size-16 rounded-2xl bg-gray-100 mb-4">
        <svg class="size-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15a2.25 2.25 0 012.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z"/>
        </svg>
      </div>
      <p class="text-gray-600 mb-4">no projects yet. start your first AI-powered spec interview.</p>
      <%= link_to new_admin_spec_path, class: "inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium text-white bg-[#ff584d] hover:bg-[#e64d43] transition-colors" do %>
        create first project
      <% end %>
    </div>
  <% end %>
</div>
