<div class="min-h-screen bg-[#f9f9f9] py-8">
  <div class="max-w-5xl mx-auto px-4 sm:px-6">
    <section>
      <div class="flex items-center justify-between mb-6">
        <header>
          <h1 class="text-3xl font-bold text-gray-900">Campaigns</h1>
          <p class="text-gray-600 mt-2">Manage your discount groups and boost promotions</p>
        </header>
        <%= link_to new_admin_discount_group_path, class: "inline-flex items-center gap-2 px-4 py-2 bg-[#ff584d] text-white rounded-lg hover:bg-[#e64d43] transition-colors font-medium text-sm" do %>
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
          </svg>
          New Group
        <% end %>
      </div>

      <% if @discount_groups.empty? %>
        <div class="bg-[#f4f4f0] rounded-xl border border-black/5 shadow-[inset_1px_1px_0_rgba(255,255,255,1),inset_-1px_-1px_0_rgba(0,0,0,0.05),0_4px_8px_rgba(0,0,0,0.05)] p-8 text-center">
          <p class="text-gray-500 mb-4">No discount groups yet. Create your first group to get started.</p>
          <%= link_to "Create First Group", new_admin_discount_group_path, class: "inline-flex items-center gap-2 px-4 py-2 bg-[#ff584d] text-white rounded-lg hover:bg-[#e64d43] transition-colors font-medium text-sm" %>
        </div>
      <% else %>
        <div class="space-y-4">
          <% @discount_groups.each do |group| %>
            <div class="bg-[#f4f4f0] rounded-xl <%= group.is_active? ? 'border-2 border-emerald-400' : 'border border-black/5' %> shadow-[inset_1px_1px_0_rgba(255,255,255,1),inset_-1px_-1px_0_rgba(0,0,0,0.05),0_4px_8px_rgba(0,0,0,0.05)] overflow-hidden">
              <div class="px-6 py-4 flex items-start justify-between gap-4">
                <div class="flex-1">
                  <div class="flex items-center gap-3 mb-2">
                    <h3 class="text-lg font-semibold text-gray-900"><%= group.name %></h3>
                    <% if group.is_active? %>
                      <span class="inline-flex items-center px-2.5 py-0.5 bg-emerald-100 text-emerald-700 text-xs font-medium rounded-full">
                        ACTIVE
                      </span>
                    <% end %>
                  </div>

                  <%# Discount details %>
                  <div class="flex flex-wrap items-center gap-x-6 gap-y-1 text-sm text-gray-600 mb-3">
                    <span>
                      <span class="text-gray-400">Referred:</span>
                      <span class="font-medium"><%= group.referred_discount_display %></span>
                    </span>
                    <span>
                      <span class="text-gray-400">Reward:</span>
                      <span class="font-medium"><%= group.referrer_reward_display %></span>
                    </span>
                    <span>
                      <span class="text-gray-400">Codes:</span>
                      <span class="font-medium"><%= group.current_generation&.codes_count || 0 %></span>
                      <% if group.discount_generations.count > 1 %>
                        <span class="text-gray-400">(<%= group.discount_generations.count %> generations)</span>
                      <% end %>
                    </span>
                  </div>

                  <%# Override/Boost status %>
                  <% if group.override_active? %>
                    <div class="inline-flex items-center gap-2 px-3 py-1.5 bg-amber-50 text-amber-700 text-sm rounded-lg border border-amber-200">
                      <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd"></path>
                      </svg>
                      <span class="font-medium">BOOST ACTIVE:</span>
                      <%= group.override_referred_display %> / <%= group.override_reward_display %>
                      <span class="text-amber-600">until <%= group.override_ends_at.strftime('%b %d') %></span>
                      <%= button_to "End Boost", cancel_override_admin_discount_group_path(group), method: :post, class: "ml-2 px-2 py-0.5 bg-amber-200 text-amber-800 rounded text-xs hover:bg-amber-300 transition-colors", data: { turbo_confirm: "End the boost early?" } %>
                    </div>
                  <% elsif group.override_scheduled? %>
                    <div class="inline-flex items-center gap-2 px-3 py-1.5 bg-blue-50 text-blue-700 text-sm rounded-lg border border-blue-200">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                      </svg>
                      <span class="font-medium">BOOST SCHEDULED:</span>
                      <%= group.override_referred_display %> / <%= group.override_reward_display %>
                      <span class="text-blue-600"><%= group.override_starts_at.strftime('%b %d') %> - <%= group.override_ends_at.strftime('%b %d') %></span>
                      <%= button_to "Cancel", cancel_override_admin_discount_group_path(group), method: :post, class: "ml-2 px-2 py-0.5 bg-blue-200 text-blue-800 rounded text-xs hover:bg-blue-300 transition-colors", data: { turbo_confirm: "Cancel the scheduled boost?" } %>
                    </div>
                  <% end %>

                  <%# Sync status %>
                  <div class="mt-2">
                    <% if group.current_generation&.synced? %>
                      <span class="inline-flex items-center gap-1.5 text-sm text-emerald-600">
                        <span class="size-2 bg-emerald-500 rounded-full"></span>
                        Synced with Shopify
                      </span>
                    <% elsif group.current_generation.present? %>
                      <span class="inline-flex items-center gap-1.5 text-sm text-amber-600">
                        <span class="size-2 bg-amber-500 rounded-full"></span>
                        Not synced
                      </span>
                    <% else %>
                      <span class="inline-flex items-center gap-1.5 text-sm text-gray-500">
                        <span class="size-2 bg-gray-400 rounded-full"></span>
                        No codes yet
                      </span>
                    <% end %>
                  </div>
                </div>

                <%# Actions %>
                <div class="flex items-center gap-2">
                  <% unless group.is_active? %>
                    <%= button_to "Activate", activate_admin_discount_group_path(group), method: :post, class: "px-3 py-1.5 bg-emerald-100 text-emerald-700 rounded-lg text-sm font-medium hover:bg-emerald-200 transition-colors", data: { turbo_confirm: "Make '#{group.name}' the active group? New referrals will use this group's rules." } %>
                  <% end %>
                  <%= link_to "Edit", edit_admin_discount_group_path(group), class: "px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors" %>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      <% end %>
    </section>
  </div>
</div>
