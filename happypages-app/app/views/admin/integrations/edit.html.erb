<div class="min-h-screen bg-[#f9f9f9] py-8">
  <div class="max-w-3xl mx-auto px-4 sm:px-6">
    <header class="mb-8">
      <h1 class="text-3xl font-bold text-gray-900">Integrations</h1>
      <p class="text-gray-600 mt-2">Connect and configure third-party services</p>
    </header>

    <% if notice %>
      <div class="mb-6 p-4 bg-emerald-50 border border-emerald-200 rounded-lg text-emerald-700 text-sm">
        <%= notice %>
      </div>
    <% end %>
    <% if alert %>
      <div class="mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm">
        <%= alert %>
      </div>
    <% end %>

    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
      <%# Awtomic %>
      <% awtomic_connected = Current.shop.awtomic_credentials[:api_key].present? %>
      <div class="bg-[#f4f4f0] rounded-xl border border-black/5 shadow-[inset_1px_1px_0_rgba(255,255,255,1),inset_-1px_-1px_0_rgba(0,0,0,0.05),0_4px_8px_rgba(0,0,0,0.05)] overflow-hidden flex flex-col">
        <div class="px-6 py-5 bg-[#1a1a2e] flex items-center justify-between">
          <span class="text-white font-semibold text-lg tracking-tight">Awtomic</span>
          <% if awtomic_connected %>
            <span class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-emerald-500/20 text-emerald-300">
              <span class="size-1.5 rounded-full bg-emerald-400"></span>
              Connected
            </span>
          <% else %>
            <span class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-white/10 text-white/60">
              <span class="size-1.5 rounded-full bg-white/40"></span>
              Not connected
            </span>
          <% end %>
        </div>
        <div class="px-6 py-5 flex-1">
          <p class="text-sm text-gray-600 leading-relaxed">Subscription management — automatically apply referral rewards to Awtomic subscriptions.</p>
          <% if awtomic_connected %>
            <%= button_to "Disconnect", admin_integrations_path, method: :delete, class: "mt-4 inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium text-gray-600 bg-gray-100 hover:bg-gray-200 cursor-pointer transition-colors", data: { turbo_confirm: "Remove Awtomic API key?" } %>
          <% else %>
            <details class="mt-4">
              <summary class="inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium text-white bg-[#ff584d] hover:bg-[#e64d43] cursor-pointer transition-colors list-none [&::-webkit-details-marker]:hidden">
                Connect
              </summary>
              <%= form_with url: admin_integrations_path, method: :patch, class: "mt-3 flex gap-2" do |f| %>
                <%= f.password_field :awtomic_api_key, placeholder: "Paste your Awtomic API key", class: "flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#ff584d]/40 focus:border-[#ff584d]" %>
                <%= f.submit "Save", class: "px-4 py-2 rounded-lg text-sm font-medium text-white bg-[#ff584d] hover:bg-[#e64d43] cursor-pointer transition-colors" %>
              <% end %>
            </details>
          <% end %>
        </div>
      </div>

      <%# Klaviyo %>
      <div class="bg-[#f4f4f0] rounded-xl border border-black/5 shadow-[inset_1px_1px_0_rgba(255,255,255,1),inset_-1px_-1px_0_rgba(0,0,0,0.05),0_4px_8px_rgba(0,0,0,0.05)] overflow-hidden flex flex-col opacity-60">
        <div class="px-6 py-5 bg-[#f0f0ec] flex items-center justify-between border-b border-black/5">
          <span class="font-semibold text-lg tracking-tight text-gray-900">Klaviyo</span>
          <span class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-200 text-gray-500">
            Coming soon
          </span>
        </div>
        <div class="px-6 py-5 flex-1">
          <p class="text-sm text-gray-600 leading-relaxed">Email marketing — trigger referral flows and share reminders.</p>
        </div>
      </div>
    </div>
  </div>
</div>
